<!-- Clone & Similarity Analysis -->
<section class="clone-section">
    <header class="clone-section__header">
        <h2>Clone & Similarity Analysis</h2>
        <p>Measures of structural duplication across the codebase.</p>
    </header>

    {{#if clone_analysis.hasData}}
    <div class="clone-metric-grid">
        <div class="clone-metric-card">
            <span class="clone-metric-card__label">Average Similarity</span>
            <span class="clone-metric-card__value">
                {{#if clone_analysis.avgSimilarity}}
                    {{format clone_analysis.avgSimilarity "0.2"}}
                {{else}}
                    —
                {{/if}}
            </span>
        </div>
        <div class="clone-metric-card">
            <span class="clone-metric-card__label">Maximum Similarity</span>
            <span class="clone-metric-card__value">
                {{#if clone_analysis.maxSimilarity}}
                    {{format clone_analysis.maxSimilarity "0.2"}}
                {{else}}
                    —
                {{/if}}
            </span>
        </div>
        <div class="clone-metric-card">
            <span class="clone-metric-card__label">Candidates After Denoising</span>
            <span class="clone-metric-card__value">
                {{#if clone_analysis.candidatesAfter}}
                    {{clone_analysis.candidatesAfter}}
                {{else}}
                    —
                {{/if}}
            </span>
        </div>
        <div class="clone-metric-card">
            <span class="clone-metric-card__label">Candidates Before Denoising</span>
            <span class="clone-metric-card__value">
                {{#if clone_analysis.candidatesBefore}}
                    {{clone_analysis.candidatesBefore}}
                {{else}}
                    —
                {{/if}}
            </span>
        </div>
        <div class="clone-metric-card">
            <span class="clone-metric-card__label">Quality Score</span>
            <span class="clone-metric-card__value">
                {{#if clone_analysis.qualityScore}}
                    {{format clone_analysis.qualityScore "0.2"}}
                {{else}}
                    —
                {{/if}}
            </span>
        </div>
        <div class="clone-metric-card">
            <span class="clone-metric-card__label">Denoising Enabled</span>
            <span class="clone-metric-card__value">
                {{#if clone_analysis.denoisingEnabled}}Yes{{else}}No{{/if}}
            </span>
        </div>
    </div>

    {{#if clone_analysis.verification}}
    <div class="clone-verification">
        <h4>Verification</h4>
        <ul>
            {{#if clone_analysis.verification.method}}<li>Method: {{clone_analysis.verification.method}}</li>{{/if}}
            {{#if clone_analysis.verification.pairs_considered}}<li>Pairs Considered: {{clone_analysis.verification.pairs_considered}}</li>{{/if}}
            {{#if clone_analysis.verification.pairs_evaluated}}<li>Pairs Evaluated: {{clone_analysis.verification.pairs_evaluated}}</li>{{/if}}
            {{#if clone_analysis.verification.pairs_scored}}<li>Pairs Scored: {{clone_analysis.verification.pairs_scored}}</li>{{/if}}
            {{#if clone_analysis.verification.avg_similarity}}<li>Verification Avg Similarity: {{format clone_analysis.verification.avg_similarity "0.2"}}</li>{{/if}}
        </ul>
    </div>
    {{/if}}

    {{#if clone_analysis.notes.length}}
    <ul class="clone-notes">
        {{#each clone_analysis.notes}}
        <li>{{this}}</li>
        {{/each}}
    </ul>
    {{/if}}
    {{else}}
    <div class="clone-empty">
        Clone detection was not enabled for this report run.
    </div>
    {{/if}}
</section>
